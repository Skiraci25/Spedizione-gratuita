<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrello con Spedizione Gratuita</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div id="shipping-calculator" class="max-w-2xl mx-auto p-4 space-y-6">
        <!-- Input Carrello -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <div class="flex items-center space-x-2 mb-4">
                <i data-lucide="shopping-cart" class="w-6 h-6 text-blue-600"></i>
                <h2 class="text-xl font-bold text-gray-800">Importo Carrello</h2>
            </div>
            <div class="mb-4">
                <label for="cart-amount" class="block text-sm font-medium text-gray-700 mb-2">
                    Inserisci l'importo del tuo carrello
                </label>
                <div class="relative">
                    <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">â‚¬</span>
                    <input
                        id="cart-amount"
                        type="number"
                        min="0"
                        step="0.01"
                        placeholder="0.00"
                        class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"
                    />
                </div>
            </div>
            <div class="space-y-2">
                <p class="text-sm font-medium text-gray-700">Aggiungi rapidamente:</p>
                <div class="flex space-x-2">
                    <button onclick="quickAdd(5)" class="px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200 text-sm font-medium">+â‚¬5</button>
                    <button onclick="quickAdd(10)" class="px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200 text-sm font-medium">+â‚¬10</button>
                    <button onclick="quickAdd(15)" class="px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200 text-sm font-medium">+â‚¬15</button>
                    <button onclick="quickAdd(20)" class="px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors duration-200 text-sm font-medium">+â‚¬20</button>
                </div>
            </div>
        </div>
        <!-- Barra Progresso Spedizione -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-2">
                    <i data-lucide="truck" class="w-6 h-6 text-blue-600"></i>
                    <h2 class="text-xl font-bold text-gray-800">Spedizione Gratuita</h2>
                </div>
                <div id="qualified-badge" class="hidden flex items-center space-x-1 text-green-600">
                    <i data-lucide="gift" class="w-5 h-5"></i>
                    <span class="font-semibold">Qualificato!</span>
                </div>
            </div>
            <div class="mb-4">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span id="current-amount">â‚¬0.00</span>
                    <span>â‚¬29.00</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                    <div id="progress-bar" class="h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-blue-400 to-blue-600" style="width: 0%"></div>
                </div>
            </div>
            <div class="text-center">
                <p id="shipping-message" class="text-gray-700">
                    Aggiungi ancora <span id="remaining-amount" class="font-bold text-blue-600">â‚¬29.00</span> per ottenere la <span class="font-semibold">spedizione gratuita!</span>
                </p>
            </div>
        </div>
    </div>
    <script>
        lucide.createIcons();
        const freeShippingThreshold = 29;
        let currentAmount = 0;
        function updateProgress() {
            const progressPercentage = Math.min(100, (currentAmount / freeShippingThreshold) * 100);
            const remaining = Math.max(0, freeShippingThreshold - currentAmount);
            const isEligible = currentAmount >= freeShippingThreshold;
            document.getElementById('current-amount').textContent = `â‚¬${currentAmount.toFixed(2)}`;
            document.getElementById('progress-bar').style.width = `${progressPercentage}%`;
            const qualifiedBadge = document.getElementById('qualified-badge');
            const progressBar = document.getElementById('progress-bar');
            const shippingMessage = document.getElementById('shipping-message');
            const remainingAmount = document.getElementById('remaining-amount');
            if (isEligible) {
                qualifiedBadge.classList.remove('hidden');
                progressBar.className = 'h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-green-400 to-green-600';
                shippingMessage.innerHTML = 'ðŸŽ‰ Complimenti! Hai diritto alla spedizione gratuita!';
                shippingMessage.className = 'text-green-600 font-semibold text-lg';
            } else {
                qualifiedBadge.classList.add('hidden');
                progressBar.className = 'h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-blue-400 to-blue-600';
                shippingMessage.innerHTML = `Aggiungi ancora <span id="remaining-amount" class="font-bold text-blue-600">â‚¬${remaining.toFixed(2)}</span> per ottenere la <span class="font-semibold">spedizione gratuita!</span>`;
                shippingMessage.className = 'text-gray-700';
            }
        }
        function quickAdd(value) {
            currentAmount += value;
            document.getElementById('cart-amount').value = currentAmount.toFixed(2);
            updateProgress();
        }
        document.getElementById('cart-amount').addEventListener('input', function(e) {
            currentAmount = Math.max(0, parseFloat(e.target.value) || 0);
            updateProgress();
        });
        updateProgress();
    </script>
</body>
</html>
